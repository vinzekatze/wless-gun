description: Поиск доступных для соединения точек доступа с помощью nmcli
author: vinzekatze
tags:
  - nmcli
  - wifi scan

arguments:
  interface:
    description: имя интерфейса wlan
    replacer: '#interface#'
  g:
    default:
      -
    description: grep -e по результатам (принимает regex-ы)
    replacer: '#grep#'
    metavar: REGEX
    multiple: true
  
shell: bash

mode:
  format:
    interface: '{!r}'
    g: '-e {!r}'
  pformat:
    g: ' | grep -i {}'

script: |-
  interface=#interface#;
  iw dev $interface info 2>&1 1>/dev/null || { echo "Device $interface not found"; exit ; };
  sudo ip link set $interface down;
  sudo iw $interface set type managed;
  sudo ip link set $interface up;
  sudo nmcli dev set $interface managed yes; sleep 1;
  sudo nmcli dev wifi list ifname $interface --rescan yes | cat#grep#

  
  

